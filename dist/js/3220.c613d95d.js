"use strict";(self["webpackChunkhiddenkittens"]=self["webpackChunkhiddenkittens"]||[]).push([[3220],{5293:(e,a,s)=>{s.d(a,{A:()=>X});var t=s(641),i=s(3751),o=s(33);const l={class:"container"},n={class:"display"},r={key:0,class:"modal-overlay"},c={class:"modal"},k={class:"modal-header"},u={key:1,class:"null-button"},d={class:"modal-body"},m={class:"item-details"},h={class:"list-info"},v={class:"list-name"},L={class:"item-count"},b=["checked","onChange"];function p(e,a,s,p,g,f){return(0,t.uX)(),(0,t.CE)("div",l,[(0,t.Lk)("div",n,[(0,t.Lk)("div",{id:"displayBookmarkListsIcon",class:"circle-icon",onClick:a[0]||(a[0]=(...e)=>f.toggleModal&&f.toggleModal(...e))},"+")]),(0,t.bF)(i.eB,{name:"fade"},{default:(0,t.k6)((()=>[g.isModalVisible?((0,t.uX)(),(0,t.CE)("div",r,[(0,t.Lk)("div",c,[(0,t.Lk)("div",k,[(0,t.Lk)("button",{class:"cancel-button",onClick:a[1]||(a[1]=(...e)=>f.toggleModal&&f.toggleModal(...e))},"Cancel"),a[4]||(a[4]=(0,t.Lk)("h3",{class:"modal-title"},"Save to List",-1)),g.bookmarkListNames.length>0?((0,t.uX)(),(0,t.CE)("button",{key:0,class:"save-button",onClick:a[2]||(a[2]=(...e)=>f.saveChanges&&f.saveChanges(...e))},"Save")):(0,t.Q3)("",!0),0===g.bookmarkListNames.length?((0,t.uX)(),(0,t.CE)("button",u,"Save")):(0,t.Q3)("",!0)]),a[6]||(a[6]=(0,t.Lk)("div",{class:"divider-line"},null,-1)),(0,t.Lk)("div",d,[0===g.bookmarkListNames.length?((0,t.uX)(),(0,t.CE)("button",{key:0,class:"create-list-button",onClick:a[3]||(a[3]=(...e)=>f.navigateToBookmark&&f.navigateToBookmark(...e))},"Create a Bookmark List")):((0,t.uX)(!0),(0,t.CE)(t.FK,{key:1},(0,t.pI)(g.bookmarkListNames,((e,s)=>((0,t.uX)(),(0,t.CE)("div",{key:s,class:"modal-item"},[(0,t.Lk)("div",m,[a[5]||(a[5]=(0,t.Lk)("i",{class:"pi pi-objects-column icon"},null,-1)),(0,t.Lk)("div",h,[(0,t.Lk)("span",v,(0,o.v_)(e),1),(0,t.Lk)("span",L,(0,o.v_)(f.bookmarkListCounts[s])+" items",1)])]),(0,t.Lk)("input",{type:"checkbox",class:"styled-checkbox",checked:g.bookmarkListChecks[s],onChange:e=>f.toggleCheckbox(s)},null,40,b)])))),128))])])])):(0,t.Q3)("",!0)])),_:1})])}var g=s(44),f=s(6430),C=s(7391);const y=(0,f.aU)(g.A),E=(0,C.xI)(g.A),D=", Description:",I={props:{itemUUID:{type:String,required:!0}},data(){return{bookmarkListDescriptions:[],bookmarkListNames:[],bookmarkListChecks:[],isModalVisible:!1,userID:"",userDocRef:"",initialChecks:[],bookmarkLists:{}}},async mounted(){await this.fetchBookmarkLists()},computed:{bookmarkListCounts(){return this.bookmarkListNames.map(((e,a)=>{const s=`${e}${D}${this.bookmarkListDescriptions[a]}`;return this.bookmarkLists[s]?.length||0}))}},methods:{toggleModal(){this.isModalVisible=!this.isModalVisible,this.isModalVisible?this.fetchBookmarkLists():this.bookmarkListChecks=[...this.initialChecks]},toggleCheckbox(e){this.bookmarkListChecks[e]=!this.bookmarkListChecks[e]},toggleCheckbox(e){this.bookmarkListChecks[e]=!this.bookmarkListChecks[e]},async fetchBookmarkLists(){try{await(0,C.hg)(E,(e=>{e?(this.userID=e.uid,this.userDocRef=(0,f.H9)(y,"Bookmarks",this.userID)):console.log("User is not authenticated")}));let e=await(0,f.x7)(this.userDocRef);if(e.exists()){const a=e.data().bookmarkLists;this.bookmarkLists=a,this.bookmarkListNames=Object.keys(a).sort().map((e=>e.split(D)[0])),this.bookmarkListDescriptions=Object.keys(a).sort().map((e=>e.split(D)[1])),this.bookmarkListChecks=this.bookmarkListNames.map(((e,s)=>{const t=`${e}${D}${this.bookmarkListDescriptions[s]}`;return a[t]?.includes(this.itemUUID)||!1})),this.initialChecks=[...this.bookmarkListChecks]}else console.log("No such document!")}catch(e){console.error("Error fetching document: ",e)}},navigateToBookmark(){this.$router.push("/bookmark")},async saveChanges(){let e=await(0,f.x7)(this.userDocRef),a=e.data().bookmarkLists||{};this.bookmarkListNames.forEach(((e,s)=>{const t=`${e}${D}${this.bookmarkListDescriptions[s]}`,i=this.bookmarkListChecks[s],o=this.initialChecks[s];i&&!o?(a[t]=a[t]||[],a[t].includes(this.itemUUID)||a[t].push(this.itemUUID)):!i&&o&&(a[t]=a[t].filter((e=>e!==this.itemUUID)))}));try{await(0,f.mZ)(this.userDocRef,{bookmarkLists:a}),this.$emit("added"),await this.fetchBookmarkLists(),this.initialChecks=[...this.bookmarkListChecks],this.isModalVisible=!1}catch(s){console.error("Error updating document: ",s),alert("Failed to save changes. Please try again.")}}}};var N=s(6262);const U=(0,N.A)(I,[["render",p],["__scopeId","data-v-55e7e77c"]]),X=U},3220:(e,a,s)=>{s.r(a),s.d(a,{default:()=>K});var t=s(641),i=s(33),o=s(953),l=s(5220),n=s(1670),r=s(5293);const c={key:0},k={class:"base-layer"},u={class:"restaurant-details-container"},d={class:"restaurant-main-content"},m={class:"restaurant-header"},h={class:"restaurant-name"},v={class:"restaurant-categories"},L={class:"restaurant-tags"},b={key:0,class:"restaurant-image"},p=["src"],g={class:"below-image"},f={class:"below-image-left"},C={class:"Event-information-container"},y={class:"event-information-container"},E={key:0},D={key:1},I={key:2},N=["innerHTML"],U={class:"descriptions"},X={class:"below-image-right"},_={class:"more-info-container"},w=["href"],R={key:0},M=["href"],B={key:1},$={__name:"EventDetails",setup(e){const a=(0,l.lq)(),s=a.params.uuid,$=(0,o.KR)(null),x=(0,o.KR)(null),W=(0,o.KR)(""),K=(0,o.KR)([]),Q=(0,o.KR)(0),A=(0,o.KR)(!1),T=((0,o.KR)(!1),(0,t.EW)((()=>{const e=$.value?.officialWebsite||"";return e.startsWith("http://")||e.startsWith("https://")?e:`http://${e}`})));function S(e){const a={year:"numeric",month:"short",day:"numeric"},s=new Date(e);return s.toLocaleDateString("en-UK",a)}const V=(0,t.EW)((()=>{if($.value&&$.value.startDate&&$.value.endDate){const e=S($.value.startDate),a=S($.value.endDate);return`${e} - ${a}`}return null}));function j(e){if(!e)return"";const{block:a,streetName:s,floorNumber:t,unitNumber:i,buildingName:o,postalCode:l}=e;return[a,s,t,i,o,l].filter(Boolean).join(", ")}function F(){A.value=!A.value}const O=(0,t.EW)((()=>A.value?$.value.tags:K.value)),G=async e=>{try{const a=await(0,n.Vr)(e),s=new Blob([a],{type:"image/jpeg"});x.value=URL.createObjectURL(s)}catch(a){console.error("Error fetching media:",a)}},H=async()=>{try{const e=await(0,n.hz)(`search/uuids?searchValues=${s}&limit=1`);if(e.data&&e.data.length){$.value=e.data[0],W.value=j($.value.address);const a=$.value.tags||[];if(K.value=a.slice(0,5),Q.value=a.length>5?a.length-5:0,$.value.images&&$.value.images.length){const e=$.value.images[0].uuid;await G(e)}}}catch(e){console.error("Error fetching place details:",e)}};return(0,t.sV)(H),(e,a)=>$.value?((0,t.uX)(),(0,t.CE)("div",c,[(0,t.Lk)("div",k,[(0,t.Lk)("div",u,[(0,t.Lk)("div",d,[a[14]||(a[14]=(0,t.Lk)("div",{class:"category-box-container"},[(0,t.Lk)("div",{class:"category-box"}," Events ")],-1)),(0,t.Lk)("div",m,[(0,t.Lk)("h2",h,(0,i.v_)($.value.name),1),(0,t.bF)(r.A,{itemUUID:$.value.uuid,onAdded:e.handleBookmarkAdded,class:"add-to-bookmark-btn"},null,8,["itemUUID","onAdded"])]),(0,t.Lk)("h4",v,(0,i.v_)($.value.description),1),(0,t.Lk)("div",L,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(O.value,((e,a)=>((0,t.uX)(),(0,t.CE)("span",{key:a,class:"tag-box"},(0,i.v_)(e),1)))),128)),Q.value>0&&!A.value?((0,t.uX)(),(0,t.CE)("span",{key:0,class:"tag-box more-tags",onClick:F,style:{cursor:"pointer"}}," +"+(0,i.v_)(Q.value)+" more ",1)):(0,t.Q3)("",!0),A.value?((0,t.uX)(),(0,t.CE)("span",{key:1,class:"show-less",onClick:F,style:{cursor:"pointer",color:"#007bff"}}," Show less ")):(0,t.Q3)("",!0)]),x.value?((0,t.uX)(),(0,t.CE)("div",b,[(0,t.Lk)("img",{src:x.value,alt:"Restaurant Image"},null,8,p)])):(0,t.Q3)("",!0),a[15]||(a[15]=(0,t.Lk)("br",null,null,-1)),(0,t.Lk)("div",g,[(0,t.Lk)("div",f,[a[3]||(a[3]=(0,t.Lk)("h3",null,"Description",-1)),a[4]||(a[4]=(0,t.Lk)("div",{class:"divider-line"},null,-1)),(0,t.Lk)("div",C,[(0,t.Lk)("div",y,[V.value?((0,t.uX)(),(0,t.CE)("p",E,[a[0]||(a[0]=(0,t.Lk)("strong",null,"Event Period:",-1)),(0,t.eW)(" "+(0,i.v_)(V.value),1)])):(0,t.Q3)("",!0),$.value.companyDisplayName?((0,t.uX)(),(0,t.CE)("p",D,[a[1]||(a[1]=(0,t.Lk)("strong",null,"Event Organiser:",-1)),(0,t.eW)(" "+(0,i.v_)($.value.companyDisplayName),1)])):(0,t.Q3)("",!0),void 0!==$.value.ticketed?((0,t.uX)(),(0,t.CE)("p",I,[a[2]||(a[2]=(0,t.Lk)("strong",null,"Ticketed:",-1)),(0,t.eW)(" "+(0,i.v_)("N"===$.value.ticketed?"No":"Yes"),1)])):(0,t.Q3)("",!0)])]),$.value.body?((0,t.uX)(),(0,t.CE)("div",{key:0,innerHTML:$.value.body,class:"descriptions-body"},null,8,N)):(0,t.Q3)("",!0),a[5]||(a[5]=(0,t.Lk)("br",null,null,-1)),a[6]||(a[6]=(0,t.Lk)("h3",null,"Nearest MRT",-1)),a[7]||(a[7]=(0,t.Lk)("div",{class:"divider-line"},null,-1)),(0,t.Lk)("p",U,(0,i.v_)($.value.nearestMrtStation||"No MRT available."),1)]),(0,t.Lk)("div",X,[(0,t.Lk)("div",_,[a[12]||(a[12]=(0,t.Lk)("h3",null,"Information",-1)),a[13]||(a[13]=(0,t.Lk)("div",{class:"divider-line"},null,-1)),(0,t.Lk)("p",null,[a[8]||(a[8]=(0,t.Lk)("i",{class:"pi pi-map-marker"},null,-1)),(0,t.eW)(" "+(0,i.v_)(W.value),1)]),(0,t.Lk)("p",null,[a[9]||(a[9]=(0,t.Lk)("i",{class:"pi pi-phone"},null,-1)),(0,t.eW)(" "+(0,i.v_)($.value.contact?.primaryContactNo||"Not available"),1)]),(0,t.Lk)("a",{href:T.value,target:"_blank"},a[10]||(a[10]=[(0,t.Lk)("i",{class:"pi pi-globe"},null,-1),(0,t.eW)(" Website ")]),8,w),$.value.officialEmail?((0,t.uX)(),(0,t.CE)("p",R,[a[11]||(a[11]=(0,t.Lk)("i",{class:"pi pi-envelope"},null,-1)),(0,t.Lk)("a",{href:`mailto:${$.value.officialEmail}`},(0,i.v_)($.value.officialEmail),9,M)])):(0,t.Q3)("",!0)])])])])])])])):((0,t.uX)(),(0,t.CE)("p",B,"Loading place details..."))}};var x=s(6262);const W=(0,x.A)($,[["__scopeId","data-v-2db0f45f"]]),K=W},44:(e,a,s)=>{s.d(a,{A:()=>n});var t=s(223),i=s(7391);const o={apiKey:"AIzaSyBIvMKxanaRLaXbKNyMjvnrT51qiOXUGUQ",authDomain:"hiddenkittens-ce78f.firebaseapp.com",projectId:"hiddenkittens-ce78f",storageBucket:"hiddenkittens-ce78f.appspot.com",messagingSenderId:"217815978130",appId:"1:217815978130:web:c3060088a75f253434564b",measurementId:"G-QLL1TDRGGH"},l=(0,t.Wp)(o),n=((0,i.xI)(l),l)}}]);
//# sourceMappingURL=3220.c613d95d.js.map