"use strict";(self["webpackChunkhiddenkittens"]=self["webpackChunkhiddenkittens"]||[]).push([[461],{461:(e,a,l)=>{l.r(a),l.d(a,{default:()=>C});var s=l(641),u=l(3751),t=l(33),o=l(953),i=l(7391),r=l(6430);const n={class:"profile-container"},v={class:"input-group"},d={class:"input-group"},c={key:0},p={class:"input-group"},k={class:"input-group"},m={class:"password-container"},w=["type"],g={class:"input-group"},h={class:"password-container"},y=["type"],b={key:1,class:"google-user-msg"},f={key:2,class:"error-msg"},L={key:3,class:"success-msg"},P={key:1,class:"loading-msg"},K={__name:"Profile",setup(e){const a=(0,i.xI)(),l=(0,r.aU)(),K=a.currentUser,R=(0,o.KR)(""),U=(0,o.KR)(""),C=(0,o.KR)(""),E=(0,o.KR)(""),N=(0,o.KR)(""),x=(0,o.KR)(""),_=(0,o.KR)(""),X=(0,o.KR)(""),Q=(0,o.KR)(!1),V=(0,o.KR)(!1),F=(0,o.KR)("true"===localStorage.getItem("isGoogleUser")),G=(0,o.KR)(!0),I=async()=>{if(!K)return _.value="User not authenticated. Please log in again.",void(G.value=!1);try{const e=(0,r.H9)(l,"Users",K.email),a=await(0,r.x7)(e);if(a.exists()){const e=a.data();R.value=e.firstName||"",U.value=e.lastName||"",C.value=K.email||"",E.value=K.email}}catch(e){console.error("Error loading user data:",e),_.value="Failed to load profile data. Please try again later."}finally{G.value=!1}},J=()=>{Q.value=!Q.value},T=()=>{V.value=!V.value},q=async()=>{if(_.value="",X.value="",R.value&&U.value&&(F.value||C.value))try{F.value||!N.value&&!x.value||await(0,i.x9)(a,E.value,N.value),F.value||(C.value!==E.value&&(await(0,i.Ww)(K,C.value),E.value=C.value),x.value&&await(0,i.f3)(K,x.value));const e=(0,r.H9)(l,"Users",E.value),s={firstName:R.value,lastName:U.value};await(0,r.mZ)(e,s),X.value="Profile updated successfully!"}catch(e){H(e)}else _.value="Fields cannot be empty."},H=e=>{switch(e.code){case"auth/network-request-failed":_.value="Network error: Please check your internet connection and try again.";break;case"auth/weak-password":_.value="The new password is too weak. Please choose a stronger password.";break;case"auth/email-already-in-use":_.value="This email is already associated with another account.";break;case"auth/requires-recent-login":_.value="Please log in again to update your profile.";break;case"auth/wrong-password":_.value="The old password is incorrect.";break;case"auth/invalid-email":_.value="Please enter a valid email address.";break;default:_.value=`Error: ${e.message}`;break}};return(0,s.sV)((()=>{I()})),(e,a)=>((0,s.uX)(),(0,s.CE)("div",n,[a[11]||(a[11]=(0,s.Lk)("h1",{class:"title"},"Profile",-1)),G.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("form",{key:0,onSubmit:(0,u.D$)(q,["prevent"])},[(0,s.Lk)("div",v,[a[5]||(a[5]=(0,s.Lk)("label",null,"First Name",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>R.value=e),placeholder:"First Name",class:"input-field"},null,512),[[u.Jo,R.value]])]),(0,s.Lk)("div",d,[a[6]||(a[6]=(0,s.Lk)("label",null,"Last Name",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=e=>U.value=e),placeholder:"Last Name",class:"input-field"},null,512),[[u.Jo,U.value]])]),F.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",c,[(0,s.Lk)("div",p,[a[7]||(a[7]=(0,s.Lk)("label",null,"Email",-1)),(0,s.bo)((0,s.Lk)("input",{type:"email","onUpdate:modelValue":a[2]||(a[2]=e=>C.value=e),placeholder:"Email",class:"input-field"},null,512),[[u.Jo,C.value]])]),(0,s.Lk)("div",k,[a[8]||(a[8]=(0,s.Lk)("label",null,"Old Password",-1)),(0,s.Lk)("div",m,[(0,s.bo)((0,s.Lk)("input",{type:Q.value?"text":"password","onUpdate:modelValue":a[3]||(a[3]=e=>N.value=e),placeholder:"Old Password",class:"input-field"},null,8,w),[[u.hp,N.value]]),(0,s.Lk)("span",{onClick:J,class:"eye-icon"},(0,t.v_)(Q.value?"üëÅÔ∏è":"üê±"),1)])]),(0,s.Lk)("div",g,[a[9]||(a[9]=(0,s.Lk)("label",null,"New Password",-1)),(0,s.Lk)("div",h,[(0,s.bo)((0,s.Lk)("input",{type:V.value?"text":"password","onUpdate:modelValue":a[4]||(a[4]=e=>x.value=e),placeholder:"New Password",class:"input-field"},null,8,y),[[u.hp,x.value]]),(0,s.Lk)("span",{onClick:T,class:"eye-icon"},(0,t.v_)(V.value?"üëÅÔ∏è":"üê±"),1)])])])),F.value?((0,s.uX)(),(0,s.CE)("p",b,"You logged in with Google. Please visit Google to change your password.")):(0,s.Q3)("",!0),_.value?((0,s.uX)(),(0,s.CE)("p",f,(0,t.v_)(_.value),1)):(0,s.Q3)("",!0),X.value?((0,s.uX)(),(0,s.CE)("p",L,(0,t.v_)(X.value),1)):(0,s.Q3)("",!0),a[10]||(a[10]=(0,s.Lk)("button",{type:"submit",class:"submit-button"},"Update Profile",-1))],32)),G.value?((0,s.uX)(),(0,s.CE)("div",P,"Loading...")):(0,s.Q3)("",!0)]))}};var R=l(6262);const U=(0,R.A)(K,[["__scopeId","data-v-d4d5b610"]]),C=U}}]);
//# sourceMappingURL=461.07c1d255.js.map