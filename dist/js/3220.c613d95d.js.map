{"version":3,"file":"js/3220.c613d95d.js","mappings":"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","sources":["webpack://hiddenkittens/./src/components/AddToBookmarkList.vue","webpack://hiddenkittens/./src/components/AddToBookmarkList.vue?cd88","webpack://hiddenkittens/./src/components/Details/EventDetails.vue","webpack://hiddenkittens/./src/components/Details/EventDetails.vue?d691","webpack://hiddenkittens/./src/firebase.js"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <div class=\"display\">\r\n      <div id=\"displayBookmarkListsIcon\" class=\"circle-icon\" @click=\"toggleModal\">+</div>\r\n    </div>\r\n\r\n    <!-- Modal Popup -->\r\n    <transition name=\"fade\">\r\n      <div v-if=\"isModalVisible\" class=\"modal-overlay\">\r\n        <div class=\"modal\">\r\n          <div class=\"modal-header\">\r\n            <button class=\"cancel-button\" @click=\"toggleModal\">Cancel</button>\r\n            <h3 class=\"modal-title\">Save to List</h3>\r\n            <button\r\n              v-if=\"bookmarkListNames.length > 0\"\r\n              class=\"save-button\"\r\n              @click=\"saveChanges\"\r\n            >Save</button>\r\n            <button\r\n              v-if=\"bookmarkListNames.length === 0\"\r\n              class=\"null-button\"\r\n            >Save</button>\r\n          </div>\r\n          <div class=\"divider-line\"></div>\r\n          <div class=\"modal-body\">\r\n            <template v-if=\"bookmarkListNames.length === 0\">\r\n              <button class=\"create-list-button\" @click=\"navigateToBookmark\">Create a Bookmark List</button>\r\n            </template>\r\n            <template v-else>\r\n              <div v-for=\"(name, index) in bookmarkListNames\" :key=\"index\" class=\"modal-item\">\r\n                <div class=\"item-details\">\r\n                  <i class=\"pi pi-objects-column icon\"></i>\r\n                  <div class=\"list-info\">\r\n                    <span class=\"list-name\">{{ name }}</span>\r\n                    <span class=\"item-count\">{{ bookmarkListCounts[index] }} items</span>\r\n                  </div>\r\n                </div>\r\n                <input\r\n                  type=\"checkbox\"\r\n                  class=\"styled-checkbox\"\r\n                  :checked=\"bookmarkListChecks[index]\"\r\n                  @change=\"toggleCheckbox(index)\"\r\n                />\r\n              </div>\r\n            </template>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </transition>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport firebaseApp from \"../firebase.js\";\r\nimport { getFirestore, doc, getDoc, updateDoc } from \"firebase/firestore\";\r\nimport { getAuth, onAuthStateChanged } from \"firebase/auth\";\r\n\r\nconst db = getFirestore(firebaseApp);\r\nconst auth = getAuth(firebaseApp);\r\nconst separator = \", Description:\";\r\n\r\nexport default {\r\n  props: {\r\n    itemUUID: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      bookmarkListDescriptions: [],\r\n      bookmarkListNames: [],\r\n      bookmarkListChecks: [],\r\n      isModalVisible: false,\r\n      userID: \"\",\r\n      userDocRef: \"\",\r\n      initialChecks: [],\r\n      bookmarkLists: {}, // Holds all bookmark lists with their items\r\n    };\r\n  },\r\n  async mounted() {\r\n    await this.fetchBookmarkLists();\r\n  },\r\n  computed: {\r\n    bookmarkListCounts() {\r\n      return this.bookmarkListNames.map((name, index) => {\r\n        const listKey = `${name}${separator}${this.bookmarkListDescriptions[index]}`;\r\n        return this.bookmarkLists[listKey]?.length || 0;\r\n      });\r\n    },\r\n  },\r\n  methods: {\r\n    // decide whether the modal is to be visiable or not\r\n    toggleModal() {\r\n    this.isModalVisible = !this.isModalVisible;\r\n    \r\n    if (this.isModalVisible) {\r\n      // Refresh the bookmark lists each time the modal is opened\r\n      this.fetchBookmarkLists();\r\n    } else {\r\n      // Reset changes if modal is closed without saving\r\n      this.bookmarkListChecks = [...this.initialChecks];\r\n    }\r\n  },\r\n  toggleCheckbox(index) {\r\n    this.bookmarkListChecks[index] = !this.bookmarkListChecks[index];\r\n  },\r\n  // toggle wehther to include the chckbox\r\n  toggleCheckbox(index) {\r\n    this.bookmarkListChecks[index] = !this.bookmarkListChecks[index];\r\n  },\r\n  // get all the bookmark lists you have\r\n  async fetchBookmarkLists() {\r\n    try {\r\n      await onAuthStateChanged(auth, (user) => {\r\n        if (user) {\r\n          this.userID = user.uid;\r\n          this.userDocRef = doc(db, \"Bookmarks\", this.userID);\r\n        } else {\r\n          console.log(\"User is not authenticated\");\r\n        }\r\n      });\r\n\r\n      let docSnap = await getDoc(this.userDocRef);\r\n\r\n      if (docSnap.exists()) {\r\n        const bookmarkLists = docSnap.data().bookmarkLists;\r\n        this.bookmarkLists = bookmarkLists;\r\n\r\n        this.bookmarkListNames = Object.keys(bookmarkLists)\r\n          .sort()\r\n          .map((key) => key.split(separator)[0]);\r\n          \r\n        this.bookmarkListDescriptions = Object.keys(bookmarkLists)\r\n          .sort()\r\n          .map((key) => key.split(separator)[1]);\r\n\r\n        this.bookmarkListChecks = this.bookmarkListNames.map((name, index) => {\r\n          const listKey = `${name}${separator}${this.bookmarkListDescriptions[index]}`;\r\n          return bookmarkLists[listKey]?.includes(this.itemUUID) || false;\r\n        });\r\n\r\n        this.initialChecks = [...this.bookmarkListChecks];\r\n      } else {\r\n        console.log(\"No such document!\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching document: \", error);\r\n    }\r\n  },\r\n  // go to the bookmark page\r\n  navigateToBookmark() {\r\n    this.$router.push(\"/bookmark\");\r\n  },\r\n  // save the add bookmarks or remove bookamrks\r\n  async saveChanges() {\r\n    let docSnap = await getDoc(this.userDocRef);\r\n    let bookmarkLists = docSnap.data().bookmarkLists || {};\r\n\r\n    this.bookmarkListNames.forEach((name, index) => {\r\n      const listKey = `${name}${separator}${this.bookmarkListDescriptions[index]}`;\r\n      const isChecked = this.bookmarkListChecks[index];\r\n      const wasInitiallyChecked = this.initialChecks[index];\r\n\r\n      if (isChecked && !wasInitiallyChecked) {\r\n        // Add itemUUID if newly checked\r\n        bookmarkLists[listKey] = bookmarkLists[listKey] || [];\r\n        if (!bookmarkLists[listKey].includes(this.itemUUID)) {\r\n          bookmarkLists[listKey].push(this.itemUUID);\r\n        }\r\n      } else if (!isChecked && wasInitiallyChecked) {\r\n        // Remove itemUUID if unchecked\r\n        bookmarkLists[listKey] = bookmarkLists[listKey].filter(\r\n          (id) => id !== this.itemUUID\r\n        );\r\n      }\r\n    });\r\n\r\n      try {\r\n        await updateDoc(this.userDocRef, { bookmarkLists });\r\n        this.$emit(\"added\");\r\n\r\n        // Refresh the bookmark lists to reflect updated counts\r\n        await this.fetchBookmarkLists();\r\n\r\n        this.initialChecks = [...this.bookmarkListChecks]; // Update initial checks to new state\r\n        this.isModalVisible = false; // Close modal after saving\r\n      } catch (error) {\r\n        console.error(\"Error updating document: \", error);\r\n        alert(\"Failed to save changes. Please try again.\");\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.circle-icon {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  width: 25px;\r\n  height: 25px;\r\n  border-radius: 50%;\r\n  background-color: #ccc;\r\n  border: 2px solid #999;\r\n  font-size: 1.5rem;\r\n  color: #333;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s ease;\r\n}\r\n\r\n.circle-icon:hover {\r\n  background-color: #bbb;\r\n}\r\n\r\n.modal-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 1000;\r\n}\r\n\r\n.modal {\r\n  background-color: white;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  width: 400px; /* Fixed width */\r\n  height: 450px; /* Fixed height */\r\n  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);\r\n  overflow-y: auto;\r\n}\r\n\r\n.modal-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.modal-title {\r\n  color: #2c3f50;\r\n  margin: 0 auto;\r\n  font-weight: bold;\r\n  font-size: 1.5rem;\r\n}\r\n\r\n.save-button {\r\n  background-color: #f8683b;\r\n  color: white;\r\n  padding: 5px 10px;\r\n  border: none;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  font-size: 15px;\r\n}\r\n\r\n.null-button {\r\n  background-color: #ffffff;\r\n  color: white;\r\n  padding: 5px 10px;\r\n  border: none;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  font-size: 15px;\r\n}\r\n\r\n.cancel-button {\r\n  background-color: #fff;\r\n  color: #565656;\r\n  padding: 5px 10px;\r\n  border: none;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  font-size: 15px;\r\n}\r\n\r\n.divider-line {\r\n  height: 1px;\r\n  background-color: #ccc;\r\n  margin-top: 5px;\r\n}\r\n\r\n.modal-body {\r\n  display: flex;\r\n  flex-direction: column;\r\n  max-height: 300px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.modal-item {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 10px 0;\r\n  border-bottom: 1px solid #e0e0e0;\r\n}\r\n\r\n.item-details {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\n\r\n.icon {\r\n  font-size: 1.2rem;\r\n  margin: 0 0 0 15px;\r\n  color: #333;\r\n}\r\n\r\n.list-info {\r\n  margin: 0 0 0 10px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  text-align: left;\r\n}\r\n\r\n.list-name {\r\n  font-size: 1rem;\r\n  color: #333;\r\n}\r\n\r\n.item-count {\r\n  font-size: 0.85rem;\r\n  color: #777;\r\n}\r\n\r\n.styled-checkbox {\r\n  width: 18px;\r\n  height: 18px;\r\n  border-radius: 50%;\r\n  appearance: none;\r\n  margin: 0 15px 0 0;\r\n  background-color: #f0f0f0;\r\n  border: 1px solid #ccc;\r\n  cursor: pointer;\r\n  position: relative;\r\n}\r\n\r\n.styled-checkbox:checked {\r\n  background-color: #f8683b;\r\n  border: 1px solid #f8683b;\r\n}\r\n\r\n.styled-checkbox:checked::before {\r\n  content: \"âœ“\";\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  font-size: 0.8rem;\r\n  color: white;\r\n}\r\n\r\n/* Fade transition styles */\r\n.fade-enter-active,\r\n.fade-leave-active {\r\n  transition: opacity 0.3s ease;\r\n}\r\n\r\n.fade-enter,\r\n.fade-leave-to {\r\n  opacity: 0;\r\n}\r\n\r\n.create-list-button {\r\n  background-color: #f8683b;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 5px;\r\n  padding: 8px 12px;\r\n  cursor: pointer;\r\n  font-size: 1rem;\r\n  display: block;\r\n  margin: 0 auto;\r\n  margin-top: 150px;\r\n  transition: background-color 0.3s ease;\r\n}\r\n\r\n.create-list-button:hover {\r\n  background-color: #fb5321;\r\n}\r\n</style>","import { render } from \"./AddToBookmarkList.vue?vue&type=template&id=55e7e77c&scoped=true\"\nimport script from \"./AddToBookmarkList.vue?vue&type=script&lang=js\"\nexport * from \"./AddToBookmarkList.vue?vue&type=script&lang=js\"\n\nimport \"./AddToBookmarkList.vue?vue&type=style&index=0&id=55e7e77c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-55e7e77c\"]])\n\nexport default __exports__","<template>\r\n  <div v-if=\"place\">\r\n    <div class=\"base-layer\">\r\n      <div class=\"restaurant-details-container\">\r\n        <div class=\"restaurant-main-content\">\r\n          <div class=\"category-box-container\">\r\n            <div class=\"category-box\">\r\n              Events\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Restaurant Name with Bookmark Button -->\r\n          <div class=\"restaurant-header\">\r\n            <h2 class=\"restaurant-name\">{{ place.name }}</h2>\r\n            <AddToBookmarkList\r\n              :itemUUID=\"place.uuid\" \r\n              @added=\"handleBookmarkAdded\"\r\n              class=\"add-to-bookmark-btn\"\r\n            />\r\n          </div>\r\n\r\n          <h4 class=\"restaurant-categories\">\r\n            {{ place.description }}\r\n          </h4>\r\n\r\n          <!-- Display tags with a toggle to show all or limited -->\r\n          <div class=\"restaurant-tags\">\r\n            <span \r\n              v-for=\"(tag, index) in visibleTags\" \r\n              :key=\"index\" \r\n              class=\"tag-box\"\r\n            >\r\n              {{ tag }}\r\n            </span>\r\n            <span \r\n              v-if=\"remainingTagsCount > 0 && !showAllTags\" \r\n              class=\"tag-box more-tags\"\r\n              @click=\"toggleShowAllTags\"\r\n              style=\"cursor: pointer;\"\r\n            >\r\n              +{{ remainingTagsCount }} more\r\n            </span>\r\n            <span \r\n              v-if=\"showAllTags\" \r\n              class=\"show-less\" \r\n              @click=\"toggleShowAllTags\"\r\n              style=\"cursor: pointer; color: #007bff;\"\r\n            >\r\n              Show less\r\n            </span>\r\n          </div>\r\n\r\n          <div v-if=\"mediaUrl\" class=\"restaurant-image\">\r\n            <img :src=\"mediaUrl\" alt=\"Restaurant Image\" />\r\n          </div>\r\n          <br>\r\n\r\n          <!-- below the image -->\r\n          <div class=\"below-image\">\r\n            <div class=\"below-image-left\">\r\n              <h3>Description</h3>\r\n              <div class=\"divider-line\"></div>\r\n\r\n              <!-- event period tab -->\r\n              <div class=\"Event-information-container\">\r\n                <div class=\"event-information-container\">\r\n                  <p v-if=\"eventPeriod\"><strong>Event Period:</strong> {{ eventPeriod }}</p>\r\n                  <p v-if=\"place.companyDisplayName\"><strong>Event Organiser:</strong> {{ place.companyDisplayName }}</p>\r\n                  <p v-if=\"place.ticketed !== undefined\"><strong>Ticketed:</strong> {{ place.ticketed === 'N' ? 'No' : 'Yes' }}</p>\r\n                </div>\r\n              </div>\r\n              <div v-if=\"place.body\" v-html=\"place.body\" class=\"descriptions-body\"></div>\r\n              <br>\r\n              <h3>Nearest MRT</h3>\r\n              <div class=\"divider-line\"></div>\r\n              <p class=\"descriptions\">{{ place.nearestMrtStation || 'No MRT available.' }}</p>\r\n            </div>\r\n            <div class=\"below-image-right\">\r\n              <div class=\"more-info-container\">\r\n                <h3>Information</h3>\r\n                <div class=\"divider-line\"></div>\r\n                <p><i class=\"pi pi-map-marker\"></i> {{ formattedAddress }}</p>\r\n                <p><i class=\"pi pi-phone\"></i> {{ place.contact?.primaryContactNo || 'Not available' }}</p>\r\n                <a :href=\"formattedOfficialWebsite\" target=\"_blank\">\r\n                  <i class=\"pi pi-globe\"></i> Website\r\n                </a>\r\n                <p v-if=\"place.officialEmail\">\r\n                  <i class=\"pi pi-envelope\"></i> \r\n                  <a :href=\"`mailto:${place.officialEmail}`\">{{ place.officialEmail }}</a>\r\n                </p>\r\n\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Sidebar with contact and rating information -->\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Loading state when place is null -->\r\n  <p v-else>Loading place details...</p>\r\n</template>\r\n  \r\n  <script setup>\r\n  import { onMounted, ref, computed } from 'vue'; \r\n  import { useRoute } from 'vue-router';\r\n  import { getPlaces, downloadMedia } from '@/tihServices.js';\r\n  import AddToBookmarkList from \"@/components/AddToBookmarkList.vue\";\r\n  \r\n  const route = useRoute();\r\n  const uuid = route.params.uuid;\r\n  const place = ref(null);\r\n  const mediaUrl = ref(null);\r\n  const formattedAddress = ref('');\r\n  const limitedTags = ref([]);\r\n  const remainingTagsCount = ref(0);\r\n  const showAllTags = ref(false);\r\n  const showOperatingHours = ref(false); // Boolean to control the OperatingHours popup\r\n\r\n  const formattedOfficialWebsite = computed(() => {\r\n    const url = place.value?.officialWebsite || '';\r\n    return url.startsWith('http://') || url.startsWith('https://') ? url : `http://${url}`;\r\n  });\r\n\r\n  function formatDate(dateString) {\r\n    const options = { year: 'numeric', month: 'short', day: 'numeric' };\r\n    const date = new Date(dateString);\r\n    return date.toLocaleDateString('en-UK', options);\r\n  }\r\n\r\n  // Computed property for event period\r\n  const eventPeriod = computed(() => {\r\n    if (place.value && place.value.startDate && place.value.endDate) {\r\n      const start = formatDate(place.value.startDate);\r\n      const end = formatDate(place.value.endDate);\r\n      return `${start} - ${end}`;\r\n    }\r\n    return null;\r\n  });\r\n  \r\n  // Function to format the address\r\n  function formatAddress(address) {\r\n    if (!address) return '';\r\n    const { block, streetName, floorNumber, unitNumber, buildingName, postalCode } = address;\r\n    return [block, streetName, floorNumber, unitNumber, buildingName, postalCode].filter(Boolean).join(', ');\r\n  }\r\n  \r\n  // Toggle to show all or limited tags\r\n  function toggleShowAllTags() {\r\n    showAllTags.value = !showAllTags.value;\r\n  }\r\n  \r\n  // Toggle the Operating Hours popup\r\n  function toggleOperatingHours() {\r\n    showOperatingHours.value = !showOperatingHours.value;\r\n  }\r\n  \r\n  // Computed: tags to display (limited or full)\r\n  const visibleTags = computed(() => {\r\n    return showAllTags.value ? place.value.tags : limitedTags.value;\r\n  });\r\n  \r\n  // Fetch media URL for the first image\r\n  const fetchFirstImageUrl = async (imageUuid) => {\r\n    try {\r\n      const response = await downloadMedia(imageUuid);\r\n      const blob = new Blob([response], { type: 'image/jpeg' });\r\n      mediaUrl.value = URL.createObjectURL(blob);\r\n    } catch (error) {\r\n      console.error('Error fetching media:', error);\r\n    }\r\n  };\r\n  \r\n  // Fetch place details using the provided uuid\r\n  const fetchPlaceDetails = async () => {\r\n    try {\r\n      const response = await getPlaces(`search/uuids?searchValues=${uuid}&limit=1`);\r\n      if (response.data && response.data.length) {\r\n        place.value = response.data[0];\r\n        formattedAddress.value = formatAddress(place.value.address);\r\n  \r\n        // Handle tags\r\n        const tags = place.value.tags || [];\r\n        limitedTags.value = tags.slice(0, 5); // Get the first 5 tags\r\n        remainingTagsCount.value = tags.length > 5 ? tags.length - 5 : 0; // Calculate how many tags are left\r\n  \r\n        // Fetch the first image UUID and get its URL\r\n        if (place.value.images && place.value.images.length) {\r\n          const firstImageUuid = place.value.images[0].uuid;\r\n          await fetchFirstImageUrl(firstImageUuid);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching place details:', error);\r\n    }\r\n  };\r\n  \r\n  onMounted(fetchPlaceDetails);\r\n</script>\r\n  \r\n<style scoped>\r\n.below-image {\r\n  display: flex; /* Makes the container a flexbox */\r\n  gap: 20px;\r\n}\r\n\r\n.below-image-left {\r\n  width: 65%;\r\n}\r\n\r\n.below-image-right {\r\n  width: 35%;\r\n}\r\n\r\n.event-information-container {\r\n  background-color: #e5f7f7; /* Light background color, adjust as needed */\r\n  text-align: left;\r\n  padding: 15px 25px; \r\n  border-radius: 10px; /* Rounded corners */\r\n  color: #333; /* Text color */\r\n  margin: 10px 0; /* Spacing around the container */\r\n  font-family: Arial, sans-serif; /* Adjust font family if needed */\r\n}\r\n\r\n.event-information-container p {\r\n  margin: 0; /* Remove default paragraph margin */\r\n  font-size: 1rem; /* Font size */\r\n  line-height: 1.5;\r\n  text-align: left;\r\n}\r\n\r\n.event-information-container strong {\r\n  font-weight: bold; /* Bold label */\r\n  color: #333; /* Label color */\r\n}\r\n\r\n.descriptions-body {\r\n  margin-top: 14px;\r\n  line-height: 1.6;\r\n  text-align: left;\r\n}\r\n\r\n.base-layer {\r\n  position: fixed;\r\n  top: 80px;\r\n  left: 0;\r\n  width: 100vw;\r\n  height: calc(100vh - 80px);;\r\n  background-color: #f9f9f9;\r\n  display: flex;\r\n  justify-content: center; /* Centers child horizontally */\r\n  align-items: center;\r\n}\r\n\r\n.restaurant-details-container {\r\n  height: calc(100vh - 80px);\r\n  display: flex;\r\n  max-width: 1200px;\r\n  background-color: #f9f9f9;\r\n}\r\n\r\n\r\n.restaurant-header {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px; /* Space between name and bookmark button */\r\n}\r\n\r\n.large-dot {\r\n  font-size: 1.5rem; /* Adjust this to control the dot size */\r\n  vertical-align: middle;\r\n  margin: 0 1px; /* Optional: add spacing around the dot */\r\n  color: #535353;\r\n}\r\n\r\n.category-box {\r\n  background-color: white;\r\n  color: #ff6b35; /* Icon and text color */\r\n  padding: 5px 10px 1px 10px;\r\n  border: 2px solid #ff6b35; /* Orange border */\r\n  border-radius: 5px;\r\n  margin: 20px 0 0 0;\r\n  font-size: 1rem;\r\n  font-weight: bold;\r\n  display: inline-flex;\r\n}\r\n.category-box-container {\r\n  text-align: left;\r\n  margin: 0 0 8px 0;\r\n}\r\n\r\nh3 {\r\n  font-size: 20px;\r\n  font-weight: bold; \r\n  text-align: left;\r\n}\r\n\r\nh4 {\r\n  text-align: left;\r\n  color: #535353;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.descriptions {\r\n  text-align: left; \r\n}\r\n\r\n.restaurant-main-content {\r\n  flex: 3;\r\n  overflow-y: auto;\r\n  padding: 0 20px 40vh 20px;\r\n  max-height: calc(100vh - 80px);\r\n}\r\n\r\n.restaurant-name {\r\n  font-size: 2rem;\r\n  text-align: left;\r\n  font-weight: bold;\r\n}\r\n\r\n.restaurant-image img {\r\n  width: 60%; \r\n  height: auto; \r\n  border-radius: 10px;\r\n}\r\n\r\n.restaurant-tags {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 10px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.restaurant-info {\r\n  margin-bottom: 30px;\r\n  text-align: left; /* Ensure the content is left-aligned */\r\n}\r\n\r\n.restaurant-info p, \r\n.restaurant-info a {\r\n  font-size: 0.95rem;\r\n  margin-bottom: 10px;\r\n  color: #007bff;\r\n  display: flex;\r\n  align-items: center; /* Align icons and text vertically */\r\n}\r\n\r\n.restaurant-info i {\r\n  color: rgb(0, 70, 144); /* Change the icon color */\r\n  margin-right: 10px; /* Add space between icon and text */\r\n  font-size: 1.2rem; /* Adjust icon size if needed */\r\n  vertical-align: middle; /* Aligns the icon in the middle of the line */\r\n}\r\n\r\n.restaurant-info a {\r\n  text-decoration: none;\r\n}\r\n\r\n.restaurant-info a:hover {\r\n  text-decoration: underline;\r\n}\r\n\r\n.tag-box {\r\n  background-color: #e0e0e0;\r\n  padding: 5px 10px;\r\n  border-radius: 20px;\r\n  font-size: 0.9rem;\r\n  color: #333;\r\n  white-space: nowrap;\r\n}\r\n\r\n.more-tags {\r\n  background-color: #d5d5d5;\r\n}\r\n\r\n.show-less {\r\n  background-color: transparent; /* No background for \"Show less\" */\r\n  color: #007bff; /* Blue color like a link */\r\n  text-decoration: underline; /* Underlined to indicate clickable */\r\n  cursor: pointer;\r\n  padding: 5px 10px;\r\n  border-radius: 20px;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.divider-line {\r\n  height: 1px;\r\n  background-color: #ccc; /* You can change the color */\r\n  margin: 10px 0; /* Adjust the space around the line */\r\n}\r\n\r\n.divider-line-2 {\r\n  height: 1px;\r\n  background-color: #ccc; /* You can change the color */\r\n  margin: 10px 0 3px 0; /* Adjust the space around the line */\r\n}\r\n\r\n.restaurant-image img {\r\n  width: 100%;\r\n  height: auto;\r\n  border-radius: 10px;\r\n}\r\n\r\n.more-info-container {\r\n  background-color: #fff;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n  margin-top: 20px;\r\n}\r\n\r\n.more-info-container h3 {\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n}\r\n\r\n.more-info-container p,\r\n.more-info-container a {\r\n  font-size: 0.95rem;\r\n  margin-bottom: 10px;\r\n  color: #007bff;\r\n  display: flex;\r\n  align-items: center;\r\n  text-align: left;\r\n}\r\n\r\n.more-info-container i {\r\n  color: rgb(0, 70, 144);\r\n  margin-right: 10px;\r\n  font-size: 1.2rem;\r\n  margin-left: 2px;\r\n}\r\n\r\n.more-info-container a {\r\n  text-decoration: none;\r\n}\r\n\r\n.more-info-container a:hover {\r\n  text-decoration: underline;\r\n}\r\n</style>","import script from \"./EventDetails.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./EventDetails.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./EventDetails.vue?vue&type=style&index=0&id=2db0f45f&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2db0f45f\"]])\n\nexport default __exports__","import { initializeApp } from 'firebase/app';\r\nimport { getAuth } from 'firebase/auth';\r\n\r\n    const firebaseConfig = {\r\n        // The firebase if from our shared firebase account\r\n        apiKey: \"AIzaSyBIvMKxanaRLaXbKNyMjvnrT51qiOXUGUQ\",\r\n        authDomain: \"hiddenkittens-ce78f.firebaseapp.com\",\r\n        projectId: \"hiddenkittens-ce78f\",\r\n        storageBucket: \"hiddenkittens-ce78f.appspot.com\",\r\n        messagingSenderId: \"217815978130\",\r\n        appId: \"1:217815978130:web:c3060088a75f253434564b\",\r\n        measurementId: \"G-QLL1TDRGGH\"\r\n    };\r\n\r\n    const firebaseApp = initializeApp(firebaseConfig);\r\n    const auth = getAuth(firebaseApp);\r\n\r\n    export default firebaseApp;\r\n\r\n    \r\n"],"names":["class","id","toggleModal","name","bookmarkListNames","length","saveChanges","navigateToBookmark","index","key","bookmarkListCounts","type","checked","bookmarkListChecks","toggleCheckbox","db","firebase","auth","separator","props","itemUUID","String","required","data","bookmarkListDescriptions","isModalVisible","userID","userDocRef","initialChecks","bookmarkLists","mounted","this","fetchBookmarkLists","computed","map","listKey","methods","user","uid","console","log","docSnap","exists","Object","keys","sort","split","includes","error","$router","push","forEach","isChecked","wasInitiallyChecked","filter","$emit","alert","__exports__","render","route","uuid","params","place","mediaUrl","formattedAddress","limitedTags","remainingTagsCount","showAllTags","formattedOfficialWebsite","url","value","officialWebsite","startsWith","formatDate","dateString","options","year","month","day","date","Date","toLocaleDateString","eventPeriod","startDate","endDate","start","end","formatAddress","address","block","streetName","floorNumber","unitNumber","buildingName","postalCode","Boolean","join","toggleShowAllTags","visibleTags","tags","fetchFirstImageUrl","async","imageUuid","response","blob","Blob","URL","createObjectURL","fetchPlaceDetails","slice","images","firstImageUuid","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","firebaseApp"],"sourceRoot":""}